<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>Untitled</title>
</head>

<body>

Code for each row of the table

<table><tr><!-- ###ROW### begin --><td>###TITLE###</td><td>###LASTUPDATED###</td><td>###OWNER###</td><td>###DOC_KEY###</td><td>###TYPE###</td><!-- ###ROW### end --></tr>


<!-- ###TEMPLATE_SEARCH### begin
	This is the template for the latest news, typically displayed on a frontpage 
-->
<form name="editform" action="###PAGE_ID###" method="get" >
<!--<input type="hidden" name="id" value="###PAGE_ID###"/> -->
<table>
	<!--<tr>
		<td>Search:</td>
		<td><input name="sword" value="###SWORD###"></input></td>
	</tr>-->
	<tr>
	 	<td>Owner:</td>
	 	<td>
	 		<select name="tx_docdb_pi1[owner]">
	 			<!-- ###OWNER_LIST### begin -->
		 		<option>option1</option>
		 		<!-- ###OWNER_LIST### begin -->
			</select>
		</td>
	</tr>
	<tr>
		<td>Document Type:</td>
	 	<td>
	 	 	<select name="tx_docdb_pi1[docType]">
		 		<!-- ###DOCTYPE_LIST### begin -->
		 		<option>option1</option>
		 		<!-- ###DOCTYPE_LIST### begin -->
		 	</select>
		</td>
	</tr>
	<tr>
		<td>Document Status:</td>
	 	<td>
	 	 	<select name="tx_docdb_pi1[docStatus]">
		 		<!-- ###STATUS_LIST### begin -->
		 		<option>option1</option>
		 		<!-- ###STATUS_LIST### begin -->
		 	</select>
		</td>
	</tr>
	<tr>
		<td>Descriptor combination:</td>
	 	<td>
	 		<table>
	 			<tr>
	 				<td>
	 					<input type="radio" name="tx_docdb_pi1[combination]" value="0" ###AND_SELECTED### />
	 				</td>
	 				<td>
	 					AND
	 				</td>
	 			</tr>
	 			<tr>
	 				<td>
	 					<input type="radio" name="tx_docdb_pi1[combination]" value="1" ###OR_SELECTED### />	 					
	 				</td>
	 				<td>
	 					OR
	 				</td>
	 			</tr>
	 		</table>
			
			
		</td>
	</tr>
	<tr>
		<td>
			Descriptors:
		</td>
		<td>
		</td>
	</tr>
	<tr>
		<td>
			<select size="8" multiple="multiple" name="tx_docdb_pi1[descriptors]_list"  style="width:150px;">
				<!-- ###SELECTED_LIST### begin Template for the selected list -->
				<!-- ###SELECTED_LIST### end Template for the selected list -->
			</select></br>
		</td>
		<td width="100%">
			<!--<div  name="tx_docdb_pi1[descriptors]_selTree" style="position:relative; left:0px; top:0px; height:84px; width:280px;border:solid 1px;overflow:auto;background:#fff;margin-bottom:5px;">-->
			<div  name="tx_docdb_pi1[descriptors]_selTree" style="position:relative; left:0px; top:0px; height:132px; width:460px;border:solid 1px;overflow:auto;background:#fff;margin-bottom:5px;">
			<!-- ###TREE### begin Template for the selected list -->
				here comes the tree;
			<!-- ###TREE### end Template for the selected list -->
			</div>
		</td>
	</tr>
	<tr>
		<td colspan="2">
		      <input type="button" onclick="setFormValueManipulate('tx_docdb_pi1[descriptors]','Remove')" value="remove" /><br /><br />
			<input type="submit" value="Submit" /><input type="button" value="New Search" onclick="location.replace('###PAGE_ID###')" />
		</td>
	</tr>
	<input type="hidden" name="tx_docdb_pi1[descriptors]" value="###DESCRIPTORS###"/>
	<input type="hidden" name="PM" />
	<input type="hidden" name="tx_docdb_pi1[tree]" value="###TREE_STATUS###"/>
	<input type="hidden" name="tx_docdb_pi1[CMD]" value="list"/>
	

<!--
			 	JavaScript after the form has been drawn:
			-->

			<script type="text/javascript">
				/*<![CDATA[*/

			// ***************
			// Used to connect the db/file browser with this document and the formfields on it!
			// ***************

			var browserWin="";
			
			function submitForm(pm,anchor) {
				document.editform.PM.value = pm;
				var CMD="tx_docdb_pi1[CMD]"
				document.editform[CMD].value = 'search';
				document.editform.action = anchor;
				document.editform.submit();
			}

			function setFormValueOpenBrowser(mode,params) {	//
				var url = "typo3conf/ext/doc_db/pi1/browse.php?mode="+mode+"&bparams="+params;

				browserWin = window.open(url,"Typo3WinBrowser","height=350,width="+(mode=="db"?650:600)+",status=0,menubar=0,resizable=1,scrollbars=1");
				browserWin.focus();
			}
			function setFormValueFromBrowseWin(fName,value,label)	{	//
				var formObj = setFormValue_getFObj(fName)
				if (formObj && value!="--div--")	{
					fObj = formObj[fName+"_list"];
						// Inserting element
					var l=fObj.length;
					var setOK=1;
					if (!formObj[fName+"_mul"] || formObj[fName+"_mul"].value==0)	{
						for (a=0;a<l;a++)	{
							if (fObj.options[a].value==value)	{
								setOK=0;
							}
						}
					}
					if (setOK)	{
						fObj.length++;
						fObj.options[l].value=value;
						fObj.options[l].text=unescape(label);

							// Traversing list and set the hidden-field
						setHiddenFromList(fObj,formObj[fName]);
						//TBE_EDITOR_fieldChanged_fName(fName,formObj[fName+"_list"]);
					}
				}
			}
			function setHiddenFromList(fObjSel,fObjHid)	{	//
				l=fObjSel.length;
				fObjHid.value="";
				for (a=0;a<l;a++)	{
					fObjHid.value+=fObjSel.options[a].value+",";
				}
			}
			function setFormValueManipulate(fName,type)	{	//
				var formObj = setFormValue_getFObj(fName)
				if (formObj)	{
					var localArray_V = new Array();
					var localArray_L = new Array();
					var localArray_S = new Array();
					var fObjSel = formObj[fName+"_list"];
					var l=fObjSel.length;
					var c=0;
					if (type=="Remove" || type=="Top" || type=="Bottom")	{
						if (type=="Top")	{
							for (a=0;a<l;a++)	{
								if (fObjSel.options[a].selected==1)	{
									localArray_V[c]=fObjSel.options[a].value;
									localArray_L[c]=fObjSel.options[a].text;
									localArray_S[c]=1;
									c++;
								}
							}
						}
						for (a=0;a<l;a++)	{
							if (fObjSel.options[a].selected!=1)	{
								localArray_V[c]=fObjSel.options[a].value;
								localArray_L[c]=fObjSel.options[a].text;
								localArray_S[c]=0;
								c++;
							}
						}
						if (type=="Bottom")	{
							for (a=0;a<l;a++)	{
								if (fObjSel.options[a].selected==1)	{
									localArray_V[c]=fObjSel.options[a].value;
									localArray_L[c]=fObjSel.options[a].text;
									localArray_S[c]=1;
									c++;
								}
							}
						}
					}
					if (type=="Down")	{
						var tC = 0;
						var tA = new Array();

						for (a=0;a<l;a++)	{
							if (fObjSel.options[a].selected!=1)	{
									// Add non-selected element:
								localArray_V[c]=fObjSel.options[a].value;
								localArray_L[c]=fObjSel.options[a].text;
								localArray_S[c]=0;
								c++;

									// Transfer any accumulated and reset:
								if (tA.length > 0)	{
									for (aa=0;aa<tA.length;aa++)	{
										localArray_V[c]=fObjSel.options[tA[aa]].value;
										localArray_L[c]=fObjSel.options[tA[aa]].text;
										localArray_S[c]=1;
										c++;
									}

									var tC = 0;
									var tA = new Array();
								}
							} else {
								tA[tC] = a;
								tC++;
							}
						}
							// Transfer any remaining:
						if (tA.length > 0)	{
							for (aa=0;aa<tA.length;aa++)	{
								localArray_V[c]=fObjSel.options[tA[aa]].value;
								localArray_L[c]=fObjSel.options[tA[aa]].text;
								localArray_S[c]=1;
								c++;
							}
						}
					}
					if (type=="Up")	{
						var tC = 0;
						var tA = new Array();
						var c = l-1;

						for (a=l-1;a>=0;a--)	{
							if (fObjSel.options[a].selected!=1)	{

									// Add non-selected element:
								localArray_V[c]=fObjSel.options[a].value;
								localArray_L[c]=fObjSel.options[a].text;
								localArray_S[c]=0;
								c--;

									// Transfer any accumulated and reset:
								if (tA.length > 0)	{
									for (aa=0;aa<tA.length;aa++)	{
										localArray_V[c]=fObjSel.options[tA[aa]].value;
										localArray_L[c]=fObjSel.options[tA[aa]].text;
										localArray_S[c]=1;
										c--;
									}

									var tC = 0;
									var tA = new Array();
								}
							} else {
								tA[tC] = a;
								tC++;
							}
						}
							// Transfer any remaining:
						if (tA.length > 0)	{
							for (aa=0;aa<tA.length;aa++)	{
								localArray_V[c]=fObjSel.options[tA[aa]].value;
								localArray_L[c]=fObjSel.options[tA[aa]].text;
								localArray_S[c]=1;
								c--;
							}
						}
						c=l;	// Restore length value in "c"
					}

						// Transfer items in temporary storage to list object:
					fObjSel.length = c;
					for (a=0;a<c;a++)	{
						fObjSel.options[a].value = localArray_V[a];
						fObjSel.options[a].text = localArray_L[a];
						fObjSel.options[a].selected = localArray_S[a];
					}
					setHiddenFromList(fObjSel,formObj[fName]);

					// TBE_EDITOR_fieldChanged_fName(fName,formObj[fName+"_list"]);
				}
			}
			function setFormValue_getFObj(fName)	{	//
				var formObj = document.editform;
				if (formObj)	{
					if (formObj[fName] && formObj[fName+"_list"] && formObj[fName+"_list"].type=="select-multiple")	{
						return formObj;
					} else {
						alert("Formfields missing:\n fName: "+formObj[fName]+"\n fName_list:"+formObj[fName+"_list"]+"\n type:"+formObj[fName+"_list"].type+"\n fName:"+fName);
					}
				}
				return "";
			}

			// END: dbFileCon parts.
		
				/*]]>*/
			</script>
</table>
</form>
<!-- ###TEMPLATE_SEARCH### begin
	This is the template for the latest news, typically displayed on a frontpage 
-->

</body>
</html>
